<div class="history-container">
  <header class="history-header">
    <h2>Histórico de Refeições</h2>
    <p>Acompanhe seu progresso nas últimas duas semanas.</p>
  </header>

  <div class="accordion">
    <div *ngFor="let dia of historico; let i = index" class="accordion-item">

      <div class="accordion-header" (click)="toggleDia(i)">
        <span class="header-date">
          {{ dia.data | date:'fullDate' }}
          <strong *ngIf="i === 0">(Hoje)</strong>
        </span>
        <span class="header-summary">
          Total: <strong>{{ dia.totalCaloriasDia }} kcal</strong>
          <span class="caret" [class.open]="diaExpandido === i"></span>
        </span>
      </div>

      <div class="accordion-content" *ngIf="diaExpandido === i">
        <div *ngFor="let refeicao of dia.refeicoes" class="meal-card">
          <h4>{{ refeicao.nome }} - {{ refeicao.totalCalorias }} kcal</h4>
          <ul>
            <li *ngFor="let alimento of refeicao.alimentos">
              <span>{{ alimento.descricao }}</span>
              <span>{{ alimento.calorias }} kcal</span>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>
</div>